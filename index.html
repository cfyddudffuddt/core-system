<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORE | SECURE ACCESS</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE VISUAL DESIGN --- */
        body { margin: 0; overflow: hidden; background-color: #050505; font-family: 'Fira Code', monospace; color: #00ff41; }
        
        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10; pointer-events: none;
        }

        /* The Main Interface Box */
        .terminal-box {
            background-color: rgba(12, 12, 14, 0.95);
            border: 1px solid #333; border-top: 4px solid #00ff41;
            padding: 40px; width: 85%; max-width: 500px;
            box-shadow: 0 0 60px rgba(0, 255, 65, 0.15);
            pointer-events: auto; position: relative; text-align: left;
            transition: all 0.5s ease;
        }

        /* Typography */
        h1 { margin: 0 0 10px 0; font-size: 28px; color: #fff; text-shadow: 0 0 10px rgba(255, 255, 255, 0.3); }
        .subtitle { font-size: 12px; color: #666; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px;}
        p { margin: 10px 0; font-size: 14px; line-height: 1.4; }
        
        /* Inputs & Buttons */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 11px; color: #888; margin-bottom: 5px; }
        input {
            width: 100%; padding: 12px;
            background: rgba(0, 0, 0, 0.5); border: 1px solid #333;
            color: #00ff41; font-family: 'Fira Code', monospace; box-sizing: border-box; outline: none;
        }
        input:focus { border-color: #00ff41; box-shadow: 0 0 15px rgba(0, 255, 65, 0.1); }

        .btn {
            width: 100%; padding: 15px; margin-top: 20px;
            background: #00ff41; color: #050505; border: none;
            font-weight: bold; cursor: pointer; text-transform: uppercase;
            font-family: 'Fira Code', monospace; letter-spacing: 1px;
        }
        .btn:hover { background: #fff; box-shadow: 0 0 25px #00ff41; }
        
        .toggle-link {
            display: block; text-align: center; margin-top: 15px;
            font-size: 11px; color: #666; text-decoration: underline; cursor: pointer; pointer-events: auto;
        }
        .toggle-link:hover { color: #fff; }

        /* Status Indicators */
        .status-bar { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .blink { animation: blinker 2s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }

        /* Utility */
        .hidden { display: none !important; }
        canvas { display: block; position: fixed; top: 0; left: 0; z-index: 1; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="ui-layer">
        
        <div id="login-panel" class="terminal-box">
            <div class="status-bar">
                <span style="font-size: 10px; color: #444;">SYS.SECURE</span>
                <span style="font-size: 10px; color: #00ff41;" class="blink">● ONLINE</span>
            </div>
            <h1>IDENTITY VERIFICATION</h1>
            <div class="subtitle">ENTER CREDENTIALS TO ACCESS C.O.R.E.</div>
            
            <div class="input-group">
                <label>> AGENT EMAIL</label>
                <input type="email" id="login-email" placeholder="user@core.net">
            </div>
            <div class="input-group">
                <label>> SECURITY KEY</label>
                <input type="password" id="login-pass" placeholder="••••••••">
            </div>

            <button class="btn" onclick="handleLogin()">AUTHENTICATE</button>
            <span class="toggle-link" onclick="toggleForm('register')">>> REQUEST NEW CLEARANCE (REGISTER)</span>
        </div>

        <div id="register-panel" class="terminal-box hidden">
             <div class="status-bar">
                <span style="font-size: 10px; color: #444;">SYS.NEW_USER</span>
                <span style="font-size: 10px; color: orange;">● PENDING</span>
            </div>
            <h1>CLEARANCE REQUEST</h1>
            <div class="subtitle">CREATE NEW AGENT PROFILE</div>
            
            <div class="input-group">
                <label>> AGENT EMAIL</label>
                <input type="email" id="reg-email">
            </div>
            <div class="input-group">
                <label>> CREATE PASSWORD</label>
                <input type="password" id="reg-pass">
            </div>

            <button class="btn" onclick="handleRegister()">SUBMIT REQUEST</button>
            <span class="toggle-link" onclick="toggleForm('login')">>> RETURN TO LOGIN</span>
        </div>

        <div id="dashboard-panel" class="terminal-box hidden">
            <div class="status-bar">
                <span style="font-size: 10px; color: #444;">ID: <span id="user-display">UNKNOWN</span></span>
                <span style="font-size: 10px; color: #00ff41;">LEVEL: FOUNDER</span>
            </div>
            <h1>MISSION CONTROL</h1>
            <div class="subtitle">WELCOME BACK, COMMANDER</div>
            
            <p>> SYSTEM STATUS: <span style="color:#00ff41">OPERATIONAL</span></p>
            <p>> ACTIVE PROJECTS:</p>
            <ul style="list-style: none; padding: 0; color: #888; font-size: 13px;">
                <li style="margin-bottom: 8px;">[ACTIVE] HIVE_CLEAN_BOT.exe</li>
                <li style="margin-bottom: 8px;">[ACTIVE] PILOT_PREP_SIM.web</li>
                <li style="margin-bottom: 8px;">[PENDING] SAFE_SITE_IOT.c</li>
            </ul>

            <button class="btn" onclick="logout()">TERMINATE SESSION</button>
        </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // ======================================================
        // STOP! PASTE YOUR FIREBASE CONFIG INSIDE THESE BRACKETS
        // ======================================================
        const firebaseConfig = {
            apiKey: "AIzaSyCix4eALWZyYsQU7lPuZMSRfnBNDW4AKK0",
  authDomain: "core-system-d53c1.firebaseapp.com",
  projectId: "core-system-d53c1",
  storageBucket: "core-system-d53c1.firebasestorage.app",
  messagingSenderId: "854751335854",
  appId: "1:854751335854:web:791657757cfa112c1ae43f"
        };
        // ======================================================

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // --- AUTH FUNCTIONS ---
        window.handleLogin = async () => {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;
            try {
                await signInWithEmailAndPassword(auth, email, pass);
            } catch (error) { alert("ERROR: " + error.message); }
        }

        window.handleRegister = async () => {
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            try {
                await createUserWithEmailAndPassword(auth, email, pass);
                alert("ACCESS GRANTED. LOGGING IN...");
            } catch (error) { alert("ERROR: " + error.message); }
        }

        window.logout = () => signOut(auth);

        window.toggleForm = (target) => {
            document.getElementById('login-panel').classList.add('hidden');
            document.getElementById('register-panel').classList.add('hidden');
            document.getElementById(target + '-panel').classList.remove('hidden');
        }

        // --- STATE MONITOR ---
        onAuthStateChanged(auth, (user) => {
            const loginPanel = document.getElementById('login-panel');
            const registerPanel = document.getElementById('register-panel');
            const dashPanel = document.getElementById('dashboard-panel');

            if (user) {
                // User is logged in -> Show Dashboard
                loginPanel.classList.add('hidden');
                registerPanel.classList.add('hidden');
                dashPanel.classList.remove('hidden');
                document.getElementById('user-display').innerText = user.email.toUpperCase();
            } else {
                // User is logged out -> Show Login
                dashPanel.classList.add('hidden');
                loginPanel.classList.remove('hidden');
            }
        });

        // --- 3D ANIMATION ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const group = new THREE.Group();
        const geo = new THREE.IcosahedronGeometry(10, 1);
        const mat = new THREE.LineBasicMaterial({ color: 0x00ff41, transparent: true, opacity: 0.15 });
        const mesh = new THREE.LineSegments(new THREE.WireframeGeometry(geo), mat);
        group.add(mesh);
        
        const coreGeo = new THREE.DodecahedronGeometry(5);
        const coreMat = new THREE.LineBasicMaterial({ color: 0x00ff41, transparent: true, opacity: 0.6 });
        const coreMesh = new THREE.LineSegments(new THREE.WireframeGeometry(coreGeo), coreMat);
        group.add(coreMesh);

        scene.add(group);
        camera.position.z = 30;

        function animate() {
            requestAnimationFrame(animate);
            mesh.rotation.y += 0.002;
            coreMesh.rotation.x -= 0.005;
            coreMesh.rotation.y -= 0.005;
            renderer.render(scene, camera);
        }
        animate();
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>